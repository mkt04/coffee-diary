.ui.unstackable.items
  .item
    .content.p-article-header-date
      %span.header= l(article.date, format: :mda)
    .content.p-article-header-bean-name
      %span.header= article.bean_name
    .content.p-article-header-edit-menu
      -# TODO::非同期で更新・削除させたい。更新削除後は画面遷移せずに画面に反映させたい
      -# TODO::SP表示の場合、アイコンにまとめてタップで編集・削除のリンクを表示させたい
      %span
        = link_to edit_article_path(article) do
          %i.edit.icon
          編集
      %span
        = link_to article, method: :delete, data: { confirm: '日記を削除しますか？' } do
          %i.trash.alternate.outline.icon
          削除

  .item.js-edit-article
    = form_with model: article, local: false do |f|
      - if article.errors.any?
        #error_explanation
          %h2= "#{pluralize(article.errors.count, "error")} prohibited this article from being saved:"
          %ul
            - article.errors.full_messages.each do |message|
              %li= message
      -#.field
      -#  = f.label :photos
      -#  = f.file_field :photos, multiple: true

      .ui.image.large
        - if photo = article.photos.first.presence
          = image_tag photo.variant(resize_to_fill: [450, 300]).processed
        - else
          %img.p-article-no-image-large{src: asset_pack_path("media/images/no_image.png")}
      .content
        .ui.input.transparent.p-article-input-div
          = f.label :shop_name, "お店：", {class: "p-article-input-label"}
          = f.text_field :shop_name, {class: "p-article-input", disabled: "disabled"}

        .ui.input.transparent.p-article-input-div.js-edit-div
          = f.label :producing_area, "産地：", {class: "p-article-input-label"}
          = f.text_field :producing_area, {class: "p-article-input js-edit-producing-area", disabled: "disabled"}
        .ui.input.transparent.p-article-input-div.js-edit-div
          = f.label :particle_size, "挽き目：", {class: "p-article-input-label"}
          = f.number_field :particle_size, {step: "0.1", class: "p-article-input js-edit-particle-size", disabled: "disabled"}

        .p-article-input-div.js-edit-div
          -#%i.check.circle.outline.icon.p-article-repeat-icon
          -#リピート
          -# TODO 表示が崩れる。flexが適用されてしまっているのを左寄せにしたい。.ui.inputとの兼ね合いをどうするか検討
          = f.check_box :want_to_again, {class: "js-edit-want-to-again"}, true, false
          = f.label :want_to_again, "リピート", {class: "p-article-input-label", style: "display: inline-block;"}

        .p-article-input-div
          -# TODO::articleにフレーバーをリレーションで持たせる。フレーバーを全て並べて評させる
          .ui.teal.label ワイニー
          .ui.teal.label フルボディ
        .ui.input.transparent.p-article-input-div.js-edit-div
          = text_area_tag "memo", article.memo, {class: "p-article-memo js-edit-memo", disabled: :disabled}
        .p-article-input-div.p-article-edit-buttons.js-article-edit-buttons
          = f.submit "更新", class: "ui button primary"
          .ui.button.js-article-edit-cancel キャンセル


